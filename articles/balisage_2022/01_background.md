## Introduction

The Endings project is a SSHRC-funded collaboration between scholars, programmers, and librarians to devise and implement guidelines and practices that ensure the long-term survival and archivability of digital edition projects, not just as data but as functioning web applications. In the first phase of the project, we converted numerous projects, ranging from small collections of texts to densely interlinked documents and datasets, from eXist-db backends into entirely static sites consisting only of HTML, CSS and JavaScript [@HolmesTakeda2019a; @HolmesTakeda2019b; @HolmesTakedaForthcoming].

Having demonstrated the feasibility of building large sites which are both static and interactive, we were left with one remaining issue: how to provide a search engine for our collections without adding an unwanted technical debt in the form of a server-side backend. Searching is often an essential component of digital edition projects and most, if not all, of our projects are built with the assumption that there will be some sort of searching ability available in the future; much of our encoding work is predicated on the notion that good, clean encoding produces not only better texts, but ones more amenable to complex and specific querying in the future. These projects thus require robust search mechanisms that can allow for a range of queries—from simple word searches to complex faceted searches, to aid in both the usability and discoverability of documents.

This paper introduces staticSearch: a serverless text-search engine with full stemming, wildcard, keyword-in-context, and filter support.[^01_1] It is made up of two distinct, albeit interdependent, components: an XSLT-based indexer that generates an inverted index of JSON files from a collection of XHTML files and an associated JavaScript module for querying and displaying search results. While our initial expectation was that staticSearch would be practical for smaller sites and perhaps not realistic for our larger ones which have tens of thousands of documents, our pessimism has proved unwarranted. Now nearing its second major release, staticSearch has become a core part of over a dozen projects, many of which contain thousands of documents, and its performance has surprised us.

## Prior Work and Existing Solutions

While full-text search engines like eXist and Solr offer powerful and well-documented mechanisms for indexing and querying large document collections, there is a lack of good options when it comes to adding search to static websites. As we detailed in @HolmesTakeda2018, we tested a number of approaches, including invoking Google Custom Search Engine (CSE)—which the authors of O’Reilly's introduction to static website development nominate as the best solution and the "undisputed king of search" [@CamdenRinaldi2018]—and hooking into a centralized Library-run Solr indexer, but all of these systems had significant drawbacks. External services such as Google CSE and the Library's Solr are not only fragile, but also difficult to customize for our needs and challenging to update. The Lunr.js JavaScript library, which bills itself as "[a] bit like Solr, but much smaller and not as bright" [@Nightingale2011], is another popular mechanism for adding search to static sites [@WikleWilliamsonBecker2020]. Lunr.js only requires a pre-built JSON index file, which it can then parse in-memory to display search results. One of serious drawback of Lunr, however, is that it requires a single JSON file in memory, which can quickly become overwhelmed by large volumes of data. The assumption is that the index will be comprised of simple text or Markdown files, but our HTML is often highly nested and enriched with data attributes and classes that retain important information from the source documents; while not all of the information contained in the HTML is critical, much of it is important when it comes to fine-tuning and configuring specific site searches. 

There are, of course, many other ways to index a document collection beyond those services list above, but our ultimate goal was creating a search engine that could easily fit within our established infrastructure of XML languages and software. As @KraetkeImsieske2016 note,  XSLT offers a "modern, powerful static website generator," one that, we realized, could quite capably handle all of the tasks required by an indexing system. 



---

[^01_1]:   All code and documentation for staticSearch can be found on its GitHub repository: https://github.com/projectEndings/staticSearch. Rendered documentation for the most recent release can be found at https://endings.uvic.ca/staticSearch/docs/index.html.

